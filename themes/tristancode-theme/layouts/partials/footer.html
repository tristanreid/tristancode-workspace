<footer class="site-footer">
  <p>&copy; {{ now.Year }} Tristan Reid Â· {{ with .Site.GetPage "/blog/whose-art-is-it" }}<a href="{{ .RelPermalink }}">Made with AI</a>{{ else }}Made with AI{{ end }}</p>
</footer>

<script>
  // Dark/light mode toggle
  const toggle = document.getElementById('theme-toggle');
  const html = document.documentElement;

  function setTheme(theme) {
    html.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
  }

  // Check for saved preference or system preference
  const saved = localStorage.getItem('theme');
  if (saved) {
    setTheme(saved);
  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
    setTheme('dark');
  }

  toggle.addEventListener('click', () => {
    const current = html.getAttribute('data-theme');
    setTheme(current === 'dark' ? 'light' : 'dark');
  });

  // Copy-to-clipboard for code blocks
  document.querySelectorAll('.post-content pre > code, .post-content pre[style]').forEach(function(el) {
    var pre = el.tagName === 'PRE' ? el : el.parentElement;
    if (pre.querySelector('.copy-btn')) return;
    pre.style.position = 'relative';
    var btn = document.createElement('button');
    btn.className = 'copy-btn';
    btn.textContent = 'Copy';
    btn.setAttribute('aria-label', 'Copy code to clipboard');
    btn.addEventListener('click', function() {
      var code = el.tagName === 'PRE' ? el.textContent : el.textContent;
      navigator.clipboard.writeText(code).then(function() {
        btn.textContent = 'Copied!';
        btn.classList.add('copied');
        setTimeout(function() {
          btn.textContent = 'Copy';
          btn.classList.remove('copied');
        }, 2000);
      });
    });
    pre.appendChild(btn);
  });
</script>
