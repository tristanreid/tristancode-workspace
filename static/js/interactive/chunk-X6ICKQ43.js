function l(){return{children:new Map,isTerminal:!1,words:[]}}var d=class{constructor(){this.root=l();this._words=[]}insert(e){if(!e)return!1;let r=this.root;for(let t of e)r.children.has(t)||r.children.set(t,l()),r=r.children.get(t);return r.isTerminal?!1:(r.isTerminal=!0,r.words.push(e),this._words.push(e),!0)}search(e){let r=this.root;for(let t of e){if(!r.children.has(t))return!1;r=r.children.get(t)}return r.isTerminal}startsWith(e){let r=this.root;for(let t of e){if(!r.children.has(t))return!1;r=r.children.get(t)}return!0}getWords(){return[...this._words]}get wordCount(){return this._words.length}get nodeCount(){let e=0,r=t=>{e++;for(let s of t.children.values())r(s)};return r(this.root),e}get totalChars(){return this._words.reduce((e,r)=>e+r.length,0)}toHierarchy(){let e=(r,t,s)=>{let a=[...r.children.keys()].sort().map(i=>e(r.children.get(i),i,s+i));return{id:s||"__root__",char:t,path:s,isTerminal:r.isTerminal,words:[...r.words],children:a}};return e(this.root,"","")}findAllMatches(e,r){let t=r?.wordBoundaries??!0,n=r?.caseSensitive??!0?e:e.toLowerCase(),a=[];for(let i=0;i<n.length;i++){let c=this.root,o=i;for(;o<n.length&&c.children.has(n[o]);){if(c=c.children.get(n[o]),c.isTerminal)if(t){let f=i===0||!u(e[i-1]),g=o+1===e.length||!u(e[o+1]);f&&g&&a.push({match:e.slice(i,o+1),start:i,end:o+1,pattern:n.slice(i,o+1)})}else a.push({match:e.slice(i,o+1),start:i,end:o+1,pattern:n.slice(i,o+1)});o++}}return a}static resolveOverlaps(e){if(e.length===0)return[];let r=[...e].sort((s,n)=>s.start!==n.start?s.start-n.start:n.end-n.start-(s.end-s.start)),t=[r[0]];for(let s=1;s<r.length;s++){let n=t[t.length-1],a=r[s];a.start>=n.start&&a.end<=n.end||a.start<n.end||t.push(a)}return t}clear(){this.root=l(),this._words=[]}};function u(h){return/[a-zA-Z]/.test(h)}export{d as a};
